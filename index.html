<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://aframe.io/releases/1.4.1/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.1/dist/mindar-image-aframe.prod.js"></script>

    
  </head>
  <body>
    <a-scene render="colorManagement: true; physicallyCorrectLights:true;" reflection="directionalLight:a-light#dirlight;" mindar-image="imageTargetSrc: ./targets.mind;" vr-mode-ui="enabled: false" device-orientation-permission-ui="enabled: false">
      <a-assets>
          <a-asset-item id="islandOnly" src="/jti_island_only_logo.glb"></a-asset-item>
          <a-asset-item id="stork" src="/Stork.glb"></a-asset-item>
          <a-asset-item id="islandNoLogo" src="/jti_island_nologo_nosphere.glb"></a-asset-item>
      </a-assets>
      <a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
      <a-entity mindar-image-target="targetIndex: 0">
        <!-- ambient lighting -->
        <a-entity light="type: ambient; color: #FFf;  intensity: .5"></a-entity>
        <!-- directional lighting -->
        <!-- <a-entity light="type: directional; color: #fff; intensity: .5" position="1 1 0"></a-entity> -->
        <a-light id="dirlight" intensity="1" light="castShadow:true;type:directional" position="1 1 1"></a-light>
        <!-- Hemisphere lighting -->
        <a-entity light="type: hemisphere; color: #FFf; groundColor: #fff; intensity: 2"></a-entity>
        <!-- Point Lights -->
        <a-entity light="type: point; intensity: 2; distance: 1000; decay: 1; color: #FFf; castShadow: true; shadowCameraVisible: true; shadowBias: -0.001;" position="0 -.2 0"></a-entity>
        <a-entity light="type: point; intensity: 2; distance: 1000; decay: 1; color: #FFf; castShadow: true; shadowCameraVisible: true; shadowBias: -0.001;" position="0 -1 0"></a-entity>
        <a-entity light="type: point; intensity: 2; distance: 1000; decay: 1; color: #FFf; castShadow: true; shadowCameraVisible: true; shadowBias: -0.001;" position="1 -1 0"></a-entity>
        <a-entity light="type: point; intensity: 2; distance: 1000; decay: 1; color: #FFf; castShadow: true; shadowCameraVisible: true; shadowBias: -0.001;" position="-1 -1 0"></a-entity>
        <a-entity light="type: point; intensity: 2; distance: 1000; decay: 1; color: #FFf; castShadow: true; shadowCameraVisible: true; shadowBias: -0.001;" position="1 -3 1"></a-entity>
        <a-entity light="type: point; intensity: 2; distance: 1000; decay: 1; color: #FFf; castShadow: true; shadowCameraVisible: true; shadowBias: -0.001;" position="-1 -1 -1"></a-entity>
        <!-- testing light location -->
        <!-- <a-box color="#ffffff" depth=".2" height=".2" width=".2" position="0 -.2 0"></a-box> -->
        <!-- <a-box color="#ff0000" depth=".2" height=".2" width=".2" position="0 -1 0"></a-box> -->
        <!-- <a-box color="#00ff00" depth=".2" height=".2" width=".2" position="1 -1 0"></a-box> -->
        <!-- <a-box color="#0000ff" depth=".2" height=".2" width=".2" position="-1 -1 0"></a-box> -->
        <!-- <a-box color="#ffffff" depth=".2" height=".2" width=".2" position="1 -3 1"></a-box> -->
        <!-- <a-box color="#f6a93d" depth=".2" height=".2" width=".2" position="-1 -1 -1"></a-box> -->

        <!-- Logo GLB -->
        <a-gltf-model 
            src="#islandOnly" 
            position="0 .4 0" 
            rotation="0 0 0" 
            scale=".5 .5 .5"  
            shadow="receive: true; cast: true;"
            rotate-on-click
            ></a-gltf-model>
        <!-- Stork GLB -->
        <a-gltf-model src="#stork" position="0 0 0" rotation="0 0 0" scale=".01 .01 .01" shadow="receive: true; cast: true;"></a-gltf-model>
        <!-- Island GLB -->
        <a-gltf-model src="#islandNoLogo" position="0 -1 0" rotation="0 0 0" scale=".5 .5 .5" shadow="receive: true; cast: true;"></a-gltf-model>
      </a-entity>
    </a-scene>

    <script>
      AFRAME.registerComponent('rotate-on-click', {
      schema: {
        duration: {type: 'number', default: 2000},
        easing: {type: 'string', default: 'linear'}
      },

      init: function () {
        var data = this.data;
        var el = this.el;
        var rotation = el.getAttribute('rotation');
        var animateRotation = AFRAME.utils.extend({}, rotation);

    
        animateRotation.y += 360;

  
        var animationProperties = {
          property: 'rotation',
          to: AFRAME.utils.coordinates.stringify(animateRotation),
          dur: data.duration,
          easing: data.easing,
          loop: false
        };

 
        el.setAttribute('animation__rotate', animationProperties);

  
        el.addEventListener('click', function () {
          el.emit('animation__rotate');
        });
      }
    });
  </script>
  </body>
</html>
